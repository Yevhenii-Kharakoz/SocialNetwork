<!DOCTYPE html>
<html>
  <head>
    <title>Socialnetwork</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
    <%= javascript_importmap_tags %>
  </head>
  <body>
  <header class="main-header">
    <div class="logo-section">
      <%= link_to root_path, class: "logo-link" do %>
        <%= image_tag("logo.png", alt: "RailsCircle logo", class: "logo") %>RailsCircle
      <% end %>
    </div>
    <div class="home-button-section">
      <%= link_to 'Home', root_path, class: "home-button" %>
    </div>
  </header>
  <div class="language-switcher-wrapper">
    <nav class="language-switcher">
      <ul>
        <li><a href="?locale=en" class="<%= 'active' if I18n.locale == :en %>">English</a></li>
        <li><a href="?locale=uk" class="<%= 'active' if I18n.locale == :uk %>">Українська</a></li>
      </ul>
    </nav>
  </div>


  <% flash.each do |type, message| %>
    <div class="flash <%= 'flash-notice' if type == 'notice' %><%= 'flash-alert' if type == 'alert' %>">
      <%= message %>
    </div>
  <% end %>
  <%= yield %>
  <script>
      document.addEventListener('turbo:load', function()  {
          const flashes = document.querySelectorAll('.flash');
          flashes.forEach(flash => {
              setTimeout(() => {
                  flash.style.transition = 'opacity 0.5s';
                  flash.style.opacity = '0';
                  setTimeout(() => flash.remove(), 500); // Повністю видаляє елемент з DOM після зникнення
              }, 3000);
          });
      });

  </script>

  </body>
</html>
